<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Job</title>
    <link rel="stylesheet" href="Frontend/css/postjob.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="Frontend/css/common.css">
    <link rel="stylesheet" href="Frontend/css/index.css">
    <script>
        function saveJob() {
            var title = document.getElementById('title').value;
            var company = document.getElementById('company').value;
            var location = document.getElementById('location').value;
            var salary = document.getElementById('salary').value;
            var workType = document.getElementById('workType').value;
            var requirements = document.getElementById('requirements').value;
            var image = document.getElementById('image').files[0];

            var errors = [];

            if (title === "") {
                errors.push("Job title is required");
                document.getElementById('titleError').innerHTML = "Job title is required";
            } else {
                document.getElementById('titleError').innerHTML = "";
            }

            if (company === "") {
                errors.push("Company is required");
                document.getElementById('companyError').innerHTML = "Company is required";
            } else {
                document.getElementById('companyError').innerHTML = "";
            }

            if (location === "") {
                errors.push("Location is required");
                document.getElementById('locationError').innerHTML = "Location is required";
            } else {
                document.getElementById('locationError').innerHTML = "";
            }

            if (salary === "") {
                errors.push("Salary is required");
                document.getElementById('salaryError').innerHTML = "Salary is required";
            } else {
                document.getElementById('salaryError').innerHTML = "";
            }

            if (workType === "") {
                errors.push("Work type is required");
                document.getElementById('workTypeError').innerHTML = "Work type is required";
            } else {
                document.getElementById('workTypeError').innerHTML = "";
            }

            if (requirements === "") {
                errors.push("Requirements are required");
                document.getElementById('requirementsError').innerHTML = "Requirements are required";
            } else {
                document.getElementById('requirementsError').innerHTML = "";
            }

            if (errors.length > 0) {
                alert("Please fill in all required fields");
                return;
            }

            var formData = new FormData();
            if (image) {
                formData.append('image', image);
            }

            var job = {
                title: title,
                company: company,
                location: location,
                salary: salary,
                workType: workType,
                requirements: requirements,
                image: formData
            };

            var jobs = JSON.parse(localStorage.getItem('jobs')) || [];
            jobs.push(job);
            localStorage.setItem('jobs', JSON.stringify(jobs));

            alert('Job posted successfully!');
            document.getElementById('jobForm').reset();
            window.location.href = 'joblist.html'; // Redirect to job listings page
        }
    </script>
</head>
<body>
  <header>
    <nav>
        <div class="logo">
          Job-Bridge
        </div>
        <ul>
            <li><a href="homepage.html">Home</a></li>
            <li><a href="joblist.html">Job Listings</a></li>
            <li><a href="postjob.html">Post A Job</a></li>
            <li><a href="index.html">Register</a></li>
        </ul>
        
        <a href="#" class="btn-get-started"><img src="./Frontend/images/profilepic.jpg" alt="Small image" class="small-image">User</a>
    </nav>
</header>
    
    <main>
        <form id="jobForm">
            <div class="form-group">
                <label for="title">Job Title:</label>
                <input type="text" id="title" required placeholder="Enter job title">
                <span id="titleError"></span>
            </div>
            <div class="form-group">
                <div class="form-group">
                    <label for="company">Company:</label>
                    <input type="text" id="company" required placeholder="Enter company name">
                    <span id="companyError"></span>
                </div>
                <div class="form-group">
                    <label for="location">Location:</label>
                    <input type="text" id="location" required placeholder="Enter location">
                    <span id="locationError"></span>
                </div>
                <div class="form-group">
                    <label for="salary">Salary:</label>
                    <input type="number" id="salary" required placeholder="Enter salary">
                    <span id="salaryError"></span>
                </div>
                <div class="form-group">
                    <label for="workType">Work Type:</label>
                    <input type="text" id="workType" required placeholder="Enter work type">
                    <span id="workTypeError"></span>
                </div>
                <div class="form-group">
                    <label for="requirements">Requirements:</label>
                    <textarea id="requirements" required placeholder="Enter job requirements"></textarea>
                    <span id="requirementsError"></span>
                </div>
                <div class="form-group">
                    <label for="image">Image:</label>
                    <input type="file" id="image">
                    <span id="imageError"></span>
                </div>
                <button type="submit" onclick="saveJob()">Post Job</button>
            </form>
        </main>
        <footer class="footer mt-auto py-3 d-xxl-block d-none">
          <div class="container">
            <div class="d-flex justify-content-between align-items-center">
              <span class="text-muted">&copy; 2024 JobBridge</span>
              <ul class="list-inline mb-0">
                <li class="list-inline-item"><a href="#" class="text-muted">User Agreement</a></li>
                <li class="list-inline-item"><a href="#" class="text-muted">Privacy Policy</a></li>
                <li class="list-inline-item"><a href="#" class="text-muted">Community Guidelines</a></li>
                <li class="list-inline-item"><a href="#" class="text-muted">Cookie Policy</a></li>
                <li class="list-inline-item"><a href="#" class="text-muted">Copyright Policy</a></li>
                <li class="list-inline-item"><a href="#" class="text-muted">Send Feedback</a></li>
                <li class="list-inline-item"><a href="#" class="text-muted">Language</a></li>
              </ul>
            </div>
          </div>
        </footer>
    </body>
    </html>